{"version":3,"sources":["../src/Codeblock.js"],"names":["CustomTypes","language","PropTypes","oneOf","Object","keys","languages","theme","themes","stringy","oneOfType","string","func","array","Codeblock","propTypes","children","node","className","as","loadExternal","src","callback","async","bool","isContainer","redact","prepend","append","defaultProps","undefined","extras","props","Renderer","elementRef","React","useRef","content","getForeignProps","getLanguageClass","ownKeys","entries","reduce","result","key","value","includes","assign"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport useContent from '@loopmode/use-content';\n\nimport languages from './languages';\nimport themes from './themes';\nimport usePrism from './hooks/usePrism';\n\nimport * as extras from './utils/contentExtras';\n\nconst CustomTypes = {\n    language: PropTypes.oneOf(Object.keys(languages)),\n    theme: PropTypes.oneOf(Object.keys(themes)),\n    stringy: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.func,\n        PropTypes.array\n    ])\n};\n\nCodeblock.propTypes = {\n    children: PropTypes.node,\n    className: PropTypes.string,\n    //\n    theme: CustomTypes.theme,\n    language: CustomTypes.language,\n    as: PropTypes.string,\n    loadExternal: PropTypes.func,\n    src: PropTypes.string,\n    callback: PropTypes.func,\n    async: PropTypes.bool,\n    isContainer: PropTypes.bool,\n    redact: PropTypes.func,\n    prepend: CustomTypes.stringy,\n    append: CustomTypes.stringy\n};\n\nCodeblock.defaultProps = {\n    language: 'javascript',\n    theme: 'okaidia',\n    as: 'pre',\n    loadExternal: undefined,\n    src: undefined,\n    callback: undefined,\n    async: false,\n    isContainer: false,\n    redact: undefined,\n    prepend: undefined,\n    append: undefined\n};\n\nCodeblock.extras = extras;\n\nexport default function Codeblock(props) {\n    const Renderer = props.as;\n    const elementRef = React.useRef(null);\n    const content = useContent(props.children, props);\n\n    usePrism(elementRef, props);\n\n    return (\n        <Renderer\n            {...getForeignProps(props)}\n            ref={elementRef}\n            className={cx(\n                'Codeblock',\n                props.className,\n                getLanguageClass(props)\n            )}\n        >\n            {content}\n        </Renderer>\n    );\n}\n\nfunction getLanguageClass(props) {\n    if (props.language && !props.isContainer) {\n        return `language-${props.language}`;\n    }\n}\n\nfunction getForeignProps(props) {\n    const ownKeys = Object.keys(Codeblock.defaultProps);\n    return Object.entries(props).reduce((result, [key, value]) => {\n        if (ownKeys.includes(key)) {\n            return result;\n        }\n        return Object.assign(result, { [key]: value });\n    }, {});\n}\n"],"file":"Codeblock.js"}